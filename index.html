<!DOCTYPE html>
<html>





<script>

var gameWords =[], randWord, guessWord = [], wordArray =[];
var missedLetters =[];
var wins = 0;
var enable = true;
var messagecount =0;

//==========================================
//              Game Start
//==========================================


function messagebox(id) {
	if(messagecount < 1){
    	id.innerHTML = "Starting Game!";
  		// timedelay(id);
   		setTimeout(function(){wordgenerator()}, 1000)
   		messagecount++;
	}else{
		return;
	}
}


//=======time delay=========
function timedelay(id){
 setTimeout(function(){
    	id.innerHTML = "";
    }, 2000)
}


//===========================================
//     Random Word Generator Function
//===========================================


function wordgenerator(){

	// console.log("Please enter your guess 1 key at a time");
	document.getElementById("message").innerHTML = "Please enter your guess 1 key at a time";


	//Array of words game will choose
	gameWords = ["porsche gt3", "nissan skyline", "mclaren p1"];
	//Choosing random word from Words Array with index
	var randIndex = Math.floor(Math.random() * gameWords.length);
	randWord = gameWords[randIndex];

	//Breaking random word's letters into array.
	for(var i = 0 ; i < randWord.length ; i++){
		wordArray.push(randWord[i]);
	}

	//Creating empty guessing array
	for(var i = 0 ; i < randWord.length ; i++){
		if( randWord[i] != " "){
		guessWord[i] = "-";
		}else{
			guessWord[i] = " ";
		}	
	}

	console.log("this is random word:" + randWord);

	//displaying blank fill info and wrong letters on screen
	document.getElementById("blankfill").innerHTML = guessWord;
	document.getElementById("wrongletters").innerHTML = missedLetters;
}


//============================================
//          Input Letters Function
//============================================



// Function to collect letter input

var count = 1 ; 
console.log(randWord);

function myFunction(event){
	if(enable == true){				// enable is filter for repeated letters
		var guessLetter = event.key; // key assigned

		if(letterscan(guessLetter,missedLetters) || letterscan(guessLetter,guessWord)){ // skips repeated keys
			console.log("try again!");
			document.getElementById("message").innerHTML = "You have already chosen that key! Please try another Key.";
		}else{

			// if key is correct letter is entered into guessed array
			if(letterscan(guessLetter, randWord)){ 
				console.log("You're RIGHT");
				document.getElementById("message").innerHTML = "Correct Letter!";
				letterReplace(guessLetter, randWord);

				document.getElementById("blankfill").innerHTML = guessWord;

			// if key is incorrect. counter is increased to indicate number of incorrect attempts.
			}else{
				console.log("You're WRONG");
				document.getElementById("message").innerHTML = "Nope, not a letter in the word. Try again!";
				count++;
				var displaycount = 7 - count;
				document.getElementById("countdown").innerHTML = displaycount;

				console.log("count:"+ count);
				missedLetters.push(guessLetter);
				document.getElementById("wrongletters").innerHTML = missedLetters;
			}
		}
		gamestatus();	
	}else{
		return;
	}
}


//letter scan Function

function letterscan(letter, word){
	var guess = false;
	for( var i = 0 ; i < word.length ; i++){
		if(letter === word[i]){
			
			guess = true; 
		}
	}
return guess;
}

//letter replacement

function letterReplace(letter, wordarray){
	for( var i = 0 ; i < wordarray.length ; i++){
		if(letter === wordarray[i]){
			guessWord[i] = letter;

			console.log(guessWord);
		}
	}
}


//=============================================
//      loop to measure is game has been won
//=============================================


function gamestatus(){
	var blanks = 0;

	// adding "-" to see if word is completed
	for( var i = 0 ; i < guessWord.length ; i++){
		if(guessWord[i] === "-"){
			blanks++;
			console.log("blanks");
		}
	}

	// if no "-" are found, game is won
	if(blanks === 0){
		count = 0; 
		console.log("YOU WIN THE GAME");
		document.getElementById("message").innerHTML = " You Win!";
		wins++;
		
		// display correct image when won
		displayimg();

		//sound associated to car
		playsound();

		

		document.getElementById("numwins").innerHTML = wins;
		missedLetters =[];
		guessWord = [];
		enable = false ;
		setTimeout(function(){enable = true}, 6000);
		setTimeout(function(){wordgenerator()}, 5000)
		setTimeout(function(){clearimg()}, 6000);
		setTimeout(function(){clearsound()}, 6000);
		document.getElementById("countdown").innerHTML = "7";
		
		// wordgenerator();
	}	
	if(count > 6){
		console.log("YOU LOSE THE GAME; try again");
		document.getElementById("message").innerHTML = "YOU LOSE!";
		count = 0;
		missedLetters =[];
		guessWord = [];
		enable = false;
		setTimeout(function(){enable = true}, 3000);
		setTimeout(function(){wordgenerator()}, 2000);
		document.getElementById("countdown").innerHTML = "7";

				

	}
}
 
// Display photo when win function
function displayimg(){
	if(randWord ==="mclaren p1"){
		document.getElementById("photo").innerHTML = "<img src='assets/img/p1.jpg'>";
	}else if( randWord === "nissan skyline"){
		document.getElementById("photo").innerHTML = "<img src='assets/img/skyline.jpg'>";
	}else if (randWord === "porsche gt3"){
		document.getElementById("photo").innerHTML = "<img src='assets/img/gt3.jpg'>";
	}
}

//Clear photo from page
function clearimg(){
	document.getElementById("photo").innerHTML = "<img src='assets/img/question.jpg'>";
}

//=====================================================
// ============= SOUND FUNCTIONS ======================
//=====================================================


//Play sound clip
function playsound(){
	if(randWord ==="mclaren p1"){
		document.getElementById("soundclip").innerHTML = "<audio autoplay><source src='assets/soundclip/racecar1.mp3' type='audio/mpeg'></audio>";
	}else if( randWord === "nissan skyline"){
		document.getElementById("soundclip").innerHTML = "<audio autoplay><source src='assets/soundclip/racecar2.mp3' type='audio/mpeg'></audio>";
	}else if (randWord === "porsche gt3"){
		document.getElementById("soundclip").innerHTML = "<audio autoplay><source src='assets/soundclip/racecar3.mp3' type='audio/mpeg'></audio>";
	}
}



//clear sound clip
function clearsound(){
	document.getElementById("soundclip").innerHTML = "";
}

</script>



<head>
		<title> Hang Man Game</title>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<link href="https://fonts.googleapis.com/css?family=Droid+Serif|Open+Sans" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="assets/css/index.css">
		
	</head>



<body onkeydown="myFunction(event)">




	<div class="container">
		<div class="row">
			<div class="col-md-12 , textcenter">
				<h1>Initial Guess!</h1>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div id ="photo" class="col-md-8 , pull-left , picstyle"> <!--images-->
				<img src="assets/img/question.jpg">
			</div>
			
			<div class="col-md-4 , pull-right" > <!--Right column /w message, blanks, guessed letters-->
				<!-- 	<div class="container"> -->
						<div class="row , messagebox"> <!--message board-->
							<!-- <div class="col-md-4 , border , textcenter , messagebox"> --> <!--images-->
								<h2> <u>Message Box</u></h2>
								<h2 id="message" onclick="messagebox(this)"> Click Here Start Game!</h2>
								
							<!-- </div> -->

						</div>
					

					
						<div class="row , wordguess">
							<!-- <div class="col-md-4 , border , textcenter" >  --><!--blank fill-->
								<h2> <u>Word to Guess</u></h2>
								<h3 id="blankfill"> </h3>
						<!-- 	</div> -->
						</div>
					

				
						<div class="row , wins">
							<!-- <div class="col-md-4 , border , textcenter">  --><!--Wins-->
								<h2> <u>Number of Wins</u></h2>
								<h3 id="numwins"> 0</h3>
						<!-- 	</div> -->
						</div>
					
						<div class="row , chance">
						<!-- 	<div class="col-md-4 , border , textcenter">  --><!--Number of tries left-->
								<h2> <u>Chances!</u></h2>
								<h3 id="countdown"> 7</h3>
						<!-- 	</div> -->
						</div>
				<!-- 	</div> -->
			</div>
			
		</div>
	</div>
	<div class="container">
		<div class="row , wrongchoice">
			 <!--letters wrong-->
				<h2><u>Wrong Letters</u></h2>
				<h3 id="wrongletters">  </h3>
			
		</div>
	</div>

<div id="soundclip"> </div>


</body>


</html>